/* =============================================================
   mobile.css — Responsive: semua resolusi & device
   Import order: TERAKHIR (override semua file di atas)

   Breakpoints:
   1200px  — laptop kecil
    992px  — tablet landscape
    768px  — tablet portrait
    480px  — mobile landscape / large phone
    360px  — mobile portrait small
   ============================================================= */

/* ══════════════════════════════════════════
   1200px — laptop kecil
══════════════════════════════════════════ */
@media (max-width: 1200px) {
  .stats { gap: 0.875rem; }
  .card h1 { font-size: 2.25rem; }
}

/* ══════════════════════════════════════════
   992px — tablet landscape
══════════════════════════════════════════ */
@media (max-width: 992px) {
  .main { padding: 1.5rem 1.25rem; }
  .step-cell { flex: 0 0 90px; width: 90px; }
}

/* ══════════════════════════════════════════
   768px — tablet portrait
══════════════════════════════════════════ */
@media (max-width: 768px) {
  :root { --topbar-h: 3.5rem; }

  .topbar  { padding: 0 1rem; }
  .logo    { font-size: 1.05rem; }
  .profile { padding: 0.3rem 0.6rem; }

  .main { padding: 1.25rem 0.875rem; }

  .sidebar {
    width: 80vw;
    max-width: 16rem;
  }

  /* Home: stat cards 2 columns */
  .stats {
    grid-template-columns: 1fr 1fr;
    gap: 0.75rem;
  }
  .stats .card:last-child {
    grid-column: 1 / -1;
  }
  .card h1   { font-size: 2rem; }
  .card p    { font-size: 0.72rem; }

  /* Upcoming card: hide center col on tablet */
  .upcoming-card {
    grid-template-columns: 1fr 3rem;
  }
  .ws-center { display: none; }

  /* Applied header wrap */
  .applied-header { flex-wrap: wrap; }
  .applied-header .search-box { width: 100%; flex: none; }
  .applied-header .btn.add { border-radius: var(--radius-sm); }

  /* Table scroll */
  .table-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
  .applied-table { min-width: 560px; }

  /* App detail */
  .app-summary { flex-direction: column; align-items: flex-start; gap: 0.875rem; }
  .detail-actions { width: 100%; justify-content: flex-end; }

  /* Stage box */
  .stage-box p        { flex-direction: column; gap: 0.15rem; }
  .stage-box p strong { min-width: unset; }

  /* Timeline */
  .timeline { padding: 1.25rem 1rem; }
  .step-cell { flex: 0 0 80px; width: 80px; }
  .timeline .step,
  .step-cell > .step {
    width: 40px !important;
    height: 40px !important;
    min-width: 40px !important;
    min-height: 40px !important;
    max-width: 40px !important;
    max-height: 40px !important;
  }
  .step-label.top,
  .step-label.bottom,
  .step-label-placeholder { height: 2.25rem; }
  .step-cell:not(:last-child)::after {
    width: calc(80px - 40px);
    top: calc(2.25rem + 20px);
    left: calc(50% + 20px);
  }

  /* Profile page */
  .profile-card          { flex-direction: column; align-items: center; }
  .profile-photo-section { width: 100%; }

  /* CV page */
  #cvViewer       { height: 380px; }
  #cvChooseLabel,
  #cvSelector     { max-width: 100%; }

  /* Auth */
  .welcome-card { padding: 2.25rem 1.75rem; max-width: 100%; }

  /* Application detail — header actions */
  .header-actions h2 { font-size: 1.1rem; }

  /* App summary responsive */
  .app-summary { padding: 1rem; }
  .company-name h1 { font-size: 1.1rem; }
  .company-name h3 { font-size: 0.8rem; }
}

/* ══════════════════════════════════════════
   480px — mobile
══════════════════════════════════════════ */
@media (max-width: 480px) {
  :root { --topbar-h: 3.25rem; }

  /* Topbar: hide username */
  .profile span { display: none; }
  .profile      { gap: 0; padding: 0.3rem 0.4rem; }

  /* Dark mode toggle smaller */
  #darkModeToggle { width: 2rem; height: 2rem; font-size: 0.875rem; }

  /* Stat cards: 1 column */
  .stats {
    grid-template-columns: 1fr;
  }
  .stats .card:last-child { grid-column: auto; }
  .card        { padding: 1.125rem 1.25rem; }
  .card h1     { font-size: 2rem; }

  /* Upcoming card */
  .upcoming-card {
    grid-template-columns: 1fr 3rem;
  }
  /* Show ws-center again on mobile as stacked */
  .ws-center {
    display: flex;
    border-right: none;
    border-top: 1px solid var(--border);
    grid-column: 1 / -1;
    padding: 0.5rem 1.125rem;
    flex-direction: row;
    gap: 0.75rem;
    align-items: center;
  }
  .upcoming-card {
    grid-template-columns: 1fr 3rem;
    grid-template-rows: auto auto;
  }
  .ws-left { grid-column: 1; grid-row: 1; }
  .ws-right { grid-column: 2; grid-row: 1; }
  .ws-center { grid-column: 1 / -1; grid-row: 2; }

  /* Applied table */
  .applied-table { min-width: 480px; }
  .applied-table th,
  .applied-table td { padding: 0.6rem 0.625rem; font-size: 0.8rem; }

  /* Modals */
  .modal-content { padding: 1.25rem; margin: 0 0.5rem; }
  .modal-content h2 { font-size: 0.975rem; }

  /* Auth */
  .welcome-card { padding: 1.75rem 1.25rem; border-radius: 20px; }
  .welcome-logo .logo-text,
  .welcome-logo .logo-accent { font-size: 1.6rem; }
  .btn-welcome { padding: 0.75rem 2rem; font-size: 0.9rem; }

  /* Profile card */
  .profile-photo-display { width: 100px; height: 100px; }

  /* Timeline */
  .timeline { padding: 1rem 0.75rem; overflow-x: auto; }
  .step-cell { flex: 0 0 72px; width: 72px; }
  .timeline .step,
  .step-cell > .step {
    width: 36px !important;
    height: 36px !important;
    min-width: 36px !important;
    min-height: 36px !important;
    max-width: 36px !important;
    max-height: 36px !important;
  }
  .step-label.top,
  .step-label.bottom,
  .step-label-placeholder { height: 2rem; }
  .step-label.top,
  .step-label.bottom { font-size: 0.65rem; }
  .step-cell:not(:last-child)::after {
    width: calc(72px - 36px);
    top: calc(2rem + 18px);
    left: calc(50% + 18px);
  }

  /* CV */
  #cvViewer { height: 300px; }

  /* Header actions */
  .header-actions { gap: 0.5rem; }
  .header-actions .back-icon,
  .header-actions .header-delete { width: 2rem; height: 2rem; font-size: 0.875rem; }
  .header-actions h2 { font-size: 1rem; }

  /* Stage box compact */
  .stage-box h3 { font-size: 0.8rem; padding: 0.6rem 1rem; }
  .stage-box p  { padding: 0.6rem 1rem 0; font-size: 0.8rem; }
  .stage-box .notes { margin: 0.5rem 1rem 1rem; padding: 0.75rem; }

  /* Detail actions */
  .detail-actions { gap: 0.375rem; }
  .detail-actions .edit-stages,
  .detail-actions .add-btn,
  .detail-actions #selectCompany {
    width: 2rem;
    height: 2rem;
    font-size: 0.875rem;
  }
}

/* ══════════════════════════════════════════
   360px — small phone
══════════════════════════════════════════ */
@media (max-width: 360px) {
  .main { padding: 1rem 0.75rem; }
  .logo { font-size: 0.95rem; }

  .card h1     { font-size: 1.75rem; }
  .card        { padding: 1rem 1rem; }

  .applied-table { min-width: 420px; }
  .applied-table th,
  .applied-table td { padding: 0.5rem 0.5rem; font-size: 0.75rem; }

  .company-name h1 { font-size: 1.05rem; }
  .company-name h3 { font-size: 0.8rem; }

  .stage-box h3  { font-size: 0.8rem; padding: 0.6rem 1rem; }
  .stage-box p   { padding: 0.6rem 1rem 0; font-size: 0.8rem; }
  .stage-box .notes { margin: 0.5rem 1rem 1rem; padding: 0.75rem; }

  .step-cell { flex: 0 0 64px; width: 64px; }
  .timeline .step,
  .step-cell > .step {
    width: 32px !important;
    height: 32px !important;
    min-width: 32px !important;
    min-height: 32px !important;
    max-width: 32px !important;
    max-height: 32px !important;
  }
  .step-label.top,
  .step-label.bottom { font-size: 0.6rem; }
  .step-cell:not(:last-child)::after {
    width: calc(64px - 32px);
    top: calc(2rem + 16px);
    left: calc(50% + 16px);
  }
}

/* ══════════════════════════════════════════
   Touch / hover optimization
══════════════════════════════════════════ */
@media (hover: none) {
  .card:hover             { transform: none; }
  .upcoming-card:hover    { transform: none; }
  .btn:hover              { transform: none; box-shadow: none; }
  .timeline .step:hover   { transform: none; }
}

/* ══════════════════════════════════════════
   Print
══════════════════════════════════════════ */
@media print {
  .topbar, .sidebar, #sidebarOverlay, .profile-dropdown { display: none !important; }
  .main { margin-top: 0 !important; padding: 0 !important; }
  .card { break-inside: avoid; }
}
